CREATE DATABASE IF NOT EXISTS `actix_todo`;
USE `actix_todo`;
DROP TABLE IF EXISTS `subtask`;
DROP TABLE IF EXISTS `todo`;
DROP DATABASE actix_todo;
CREATE DATABASE actix_todo;
USE actix_todo;
-- BASIC SCHEMA
CREATE TABLE nouns (
    `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `name` VARCHAR(256) NOT NULL UNIQUE
);
CREATE TABLE adjactives (
    `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `name` VARCHAR(256) NOT NULL UNIQUE
);
CREATE TABLE users (
    `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `email` VARCHAR(256) NOT NULL UNIQUE,
    `name` VARCHAR(256) NOT NULL UNIQUE
);
CREATE TABLE flag (
    `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `name` VARCHAR(256) NOT NULL UNIQUE,
    `answer` VARCHAR(256) NOT NULL,
    `description` VARCHAR(32765) NULL,
    `filepath` VARCHAR(256) NOT NULL UNIQUE
);
CREATE TABLE score (
    `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    -- Each user can guess a flag only once
    `flag_id` BIGINT UNSIGNED NOT NULL,
    `user_id` BIGINT UNSIGNED NOT NULL,
    FOREIGN KEY (`flag_id`) REFERENCES `users`(`id`),
    FOREIGN KEY (`user_id`) REFERENCES `flag`(`id`),
    UNIQUE KEY `single_guess_per_user` (`flag_id`, `user_id`)
);
-- SAMPLE DATA
INSERT INTO flag(name, answer, filepath, description)
VALUES (
        "uzdevums 1",
        "correct",
        "task1.zip",
        "Apraksts nr 1"
    ),
    (
        "uzdevums 3",
        "corrects",
        "task3.zip",
        "Apraksts nr 3 loti gars"
    ),
    (
        "uzdevums 2",
        "asdf",
        "task2.zip",
        "Apraksts nr 2"
    );
INSERT INTO users (name, email)
VALUES ("Lielais Dukurs", "akmens@asd.lv"),
    ("Mazais Bumbulis", "ivans@asd.lv");
INSERT INTO score(flag_id, user_id)
VALUES (1, 1),
    (2, 1),
    (2, 2);
INSERT INTO nouns(name)
VALUES ("bullis"),
    ("Bumbiere"),
    ("Bumbieris"),
    ("Bumbieru sidrs"),
    ("Bundža"),
    ("Bungas"),
    ("Bura"),
    ("Burbulis"),
    ("Burdons"),
    ("Burka"),
    ("Burkāns"),
    ("Burve"),
    ("Burvestība"),
    ("Burvis"),
    ("Burvība"),
    ("Bute"),
    ("Butāna"),
    ("Buča"),
    ("Bārda"),
    ("Bārijs"),
    ("Bārkšsakne"),
    ("Bēglis"),
    ("Bērns"),
    ("Bērzs"),
    ("Bīskaps"),
    ("Bļoda"),
    ("Caharija"),
    ("Caurule"),
    ("Caurums"),
    ("Cefanja"),
    ("Celis"),
    ("Celms"),
    ("Celuloze"),
    ("Centromēra"),
    ("Centrs"),
    ("Centrālāfrikas Republika"),
    ("Cepure"),
    ("Cers"),
    ("Ceturtdiena"),
    ("Ceļinieks"),
    ("Ceļš"),
    ("Ciems"),
    ("Ciete"),
    ("Ciešamā kārta"),
    ("Cigun"),
    ("Ciklons"),
    ("Cilme"),
    ("Cilpa"),
    ("Cilvēce"),
    ("Cilvēks"),
    ("Cirkulis"),
    ("Cirmenis"),
    ("Cirslis"),
    ("Cirvis"),
    ("Citrons"),
    ("Citronskābe"),
    ("Civilizācija"),
    ("Cukurs"),
    ("Cukurslimība"),
    ("Cukurābols"),
    ("Cālis"),
    ("Cēlgāze"),
    ("Cēlmetāls"),
    ("Cēzijs"),
    ("Cūka"),
    ("Daba"),
    ("Daikts"),
    ("Daina"),
    ("Dakts"),
    ("Dambis"),
    ("Darbs"),
    ("Darbības vārds"),
    ("Darva"),
    ("Darāmās kārta"),
    ("Dators"),
    ("Datīvs"),
    ("Daudzskaitlis"),
    ("Daudzstūris"),
    ("Daļa"),
    ("Daļskaitlis"),
    ("Debesjums"),
    ("Debesmanna"),
    ("Debess"),
    ("Decembris"),
    ("Deguns"),
    ("Degvīns"),
    ("Deklinācija"),
    ("Delna"),
    ("Delta"),
    ("Deminutīvs"),
    ("Demiurgs"),
    ("Demonīms"),
    ("Detrīts"),
    ("Diagonāle"),
    ("Dialekts"),
    ("Diaspora"),
    ("Dibens"),
    ("Diena"),
    ("Dienests"),
    ("Dienvidaustrumāzija"),
    ("Dienvidkoreja"),
    ("Dienvidsudāna"),
    ("Dieveris"),
    ("Dievs"),
    ("Dievība"),
    ("Difrakcija"),
    ("Dinastija"),
    ("Diognāle"),
    ("Diriģents"),
    ("Disaharīds"),
    ("Dispersija"),
    ("Distance"),
    ("Divdabis"),
    ("Divi"),
    ("Divritenis"),
    ("Divskaitlis"),
    ("Diēzs"),
    ("Dižpārdoklis"),
    ("Dižskābardis"),
    ("Domstarpība"),
    ("Dona"),
    ("Draudzība"),
    ("Draugs"),
    ("Dreifs"),
    ("Drifts"),
    ("Drumlins"),
    ("Drēzdene"),
    ("Dumjība"),
    ("Duris"),
    ("Durklis"),
    ("Durvis"),
    ("Dvaša"),
    ("Dvēsele"),
    ("Dzeguze"),
    ("Dzeinis"),
    ("Dzelonis"),
    ("Dzelzs"),
    ("Dzenis"),
    ("Dzeroklis"),
    ("Dziesma"),
    ("Dzimta"),
    ("Dzimte"),
    ("Dzimums"),
    ("Dzintars"),
    ("Dzirde"),
    ("Dzirkles"),
    ("Dzirnavas"),
    ("Dzērve"),
    ("Dzērvene"),
    ("Dzīve"),
    ("Dzīvesveids"),
    ("Dzīvnieks"),
    ("Dānija"),
    ("Dārzenis"),
    ("Dāvana"),
    ("Dēle"),
    ("Dēlis"),
    ("Dēls"),
    ("Dīgsts"),
    ("Dūmi"),
    ("Dūnas"),
    ("Džibutija"),
    ("Džins"),
    ("Egle"),
    ("Ego"),
    ("Eifēmisms"),
    ("Eira"),
    ("Eiropa"),
    ("Eirāzija"),
    ("Ekoloģija"),
    ("Ekonomika"),
    ("Ekseģēze"),
    ("Ektoparazīts"),
    ("Ekvadora"),
    ("Ekvinokcija"),
    ("Elektrons"),
    ("Elements"),
    ("Elfs"),
    ("Elipse"),
    ("Elkonis"),
    ("Emisija"),
    ("Emuārs"),
    ("Epigrāfika"),
    ("Epitets"),
    ("Ercens"),
    ("Erfurte"),
    ("Ergatīvs"),
    ("Eritreja"),
    ("Esamība"),
    ("Esene"),
    ("Esperanto"),
    ("Estere"),
    ("Esteris"),
    ("Etalons"),
    ("Etanols"),
    ("Etilspirts"),
    ("Etimoloģija"),
    ("Etiopija"),
    ("Etiķis");
INSERT INTO adjactives(name)
VALUES ("agrs"),
    ("Akls"),
    ("Aktuāls"),
    ("Amizants"),
    ("Amorfs"),
    ("Angļu"),
    ("Ass"),
    ("Atjautīgs"),
    ("Augsts"),
    ("Aušīgs"),
    ("Baismīgs"),
    ("Baltas"),
    ("Biezs"),
    ("Bikls"),
    ("Bīstams"),
    ("Caurs"),
    ("Ciets"),
    ("Daudzvalodīgs"),
    ("Drošs"),
    ("Drēgns"),
    ("Dzeltens"),
    ("Dzestrs"),
    ("Galvenais"),
    ("Garš"),
    ("Gudrs"),
    ("Homofobisks"),
    ("Homoseksuāls"),
    ("Imaginārs"),
    ("Intransitīvs"),
    ("Irdens"),
    ("Jauns"),
    ("Kails"),
    ("Karsts"),
    ("Kolektīvs"),
    ("Konkurētspējīgs"),
    ("Kvalitatīvs"),
    ("Labs"),
    ("Labvēlīgs"),
    ("Lakonisks"),
    ("Liels"),
    ("Lokans"),
    ("Vikivārdnīca:Latviešu valodas īpašības vārda sagatave"),
    ("Mazs"),
    ("Maģisks"),
    ("Melns"),
    ("Moderns"),
    ("Molārs"),
    ("Mono"),
    ("Mīksts"),
    ("Nederīgs"),
    ("Nedziļš"),
    ("Nekulturāls"),
    ("Netīrs"),
    ("Oranžs"),
    ("Pelēks"),
    ("Perfekts"),
    ("Perpendikulārs"),
    ("Pikts"),
    ("Pilns"),
    ("Plats"),
    ("Pliks"),
    ("Plāns"),
    ("Puķains"),
    ("Radioaktīvs"),
    ("Raibs"),
    ("Rets"),
    ("Rituāls"),
    ("Rāms"),
    ("Rīta"),
    ("Rūgts"),
    ("Salds"),
    ("Salts"),
    ("Sauss"),
    ("Sekls"),
    ("Sens"),
    ("Silts"),
    ("Skaists"),
    ("Skrajš"),
    ("Skābs"),
    ("Slapjš"),
    ("Slikts"),
    ("Smags"),
    ("Staigns"),
    ("Stiprs"),
    ("Sveiks"),
    ("Svēts"),
    ("Sīks"),
    ("Transitīvs"),
    ("Tukšs"),
    ("Tumšs"),
    ("Tīrs"),
    ("Veģetārs"),
    ("Violets"),
    ("Vēls"),
    ("Vēss"),
    ("Zaļš"),
    ("Zils"),
    ("Ātrs"),
    ("Īgns"),
    ("Īss"),
    ("Ļauns"),
    ("Šaurs");
