
DROP DATABASE actix_todo;
CREATE DATABASE actix_todo;
ALTER DATABASE actix_todo CHARACTER SET utf8;
USE actix_todo;
-- BASIC SCHEMA
CREATE TABLE nouns (
    `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `name` VARCHAR(256) NOT NULL UNIQUE
);
CREATE TABLE adjactives (
    `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `name` VARCHAR(256) NOT NULL UNIQUE
);
CREATE TABLE users (
    `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `email` VARCHAR(256) NOT NULL UNIQUE,
    `name` VARCHAR(256) NOT NULL UNIQUE
);
CREATE TABLE flag (
    `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `name` VARCHAR(256) NOT NULL UNIQUE,
    `answer` VARCHAR(256) NOT NULL,
    `description` TEXT NULL ,
    `filepath` VARCHAR(256) NULL UNIQUE
);

ALTER TABLE flag CONVERT TO CHARACTER SET utf8;

CREATE TABLE score (
    `id` BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    -- Each user can guess a flag only once
    `flag_id` BIGINT UNSIGNED NOT NULL,
    `user_id` BIGINT UNSIGNED NOT NULL,
    `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (`flag_id`) REFERENCES `flag`(`id`) ON DELETE CASCADE,
    FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE CASCADE,
    UNIQUE KEY `single_guess_per_user` (`flag_id`, `user_id`)
);
-- SAMPLE DATA
INSERT INTO flag(name, answer, filepath, description)
VALUES (
        "uzdevums 1",
        "correct",
        "task1.zip",
        "Apraksts nr 1"
    ),
    (
        "uzdevums 3",
        "corrects",
        "task3.zip",
        "Apraksts nr 3 loti gars"
    ),
    (
        "uzdevums 2",
        "asdf",
        NULL,
        "<h1>Apraksts ka embeded html. Sis noteikti nav pareizakais veids ka to visu procesu taisit</h1>"
    );
INSERT INTO users (name, email)
VALUES ("Lielais Dukurs", "akmens@asd.lv"),
    ("Mazais Bumbulis", "ivans@asd.lv");
INSERT INTO score(flag_id, user_id)
VALUES (1, 1),
    (2, 1),
    (2, 2);
INSERT INTO nouns(name)
VALUES ("Bullis"),
    ("Bumbiere"),
    ("Bumbieris"),
    ("Bumbieru sidrs"),
    ("Bundza"),
    ("Bungas"),
    ("Bura"),
    ("Burbulis"),
    ("Burdons"),
    ("Burka"),
    ("Burkans"),
    ("Burve"),
    ("Burvestiba"),
    ("Burvis"),
    ("Burviba"),
    ("Bute"),
    ("Butana"),
    ("Buca"),
    ("Barda"),
    ("Barijs"),
    ("Barkssakne"),
    ("Beglis"),
    ("Berns"),
    ("Berzs"),
    ("Biskaps"),
    ("Bļoda"),
    ("Caharija"),
    ("Caurule"),
    ("Caurums"),
    ("Cefanja"),
    ("Celis"),
    ("Celms"),
    ("Celuloze"),
    ("Centromera"),
    ("Centrs"),
    ("Centralafrikas Republika"),
    ("Cepure"),
    ("Cers"),
    ("Ceturtdiena"),
    ("Ceļinieks"),
    ("Ceļs"),
    ("Ciems"),
    ("Ciete"),
    ("Ciesama karta"),
    ("Cigun"),
    ("Ciklons"),
    ("Cilme"),
    ("Cilpa"),
    ("Cilvece"),
    ("Cilveks"),
    ("Cirkulis"),
    ("Cirmenis"),
    ("Cirslis"),
    ("Cirvis"),
    ("Citrons"),
    ("Citronskabe"),
    ("Civilizacija"),
    ("Cukurs"),
    ("Cukurslimiba"),
    ("Cukurabols"),
    ("Calis"),
    ("Celgaze"),
    ("Celmetals"),
    ("Cezijs"),
    ("Cūka"),
    ("Daba"),
    ("Daikts"),
    ("Daina"),
    ("Dakts"),
    ("Dambis"),
    ("Darbs"),
    ("Darbibas vards"),
    ("Darva"),
    ("Daramas karta"),
    ("Dators"),
    ("Dativs"),
    ("Daudzskaitlis"),
    ("Daudzstūris"),
    ("Daļa"),
    ("Daļskaitlis"),
    ("Debesjums"),
    ("Debesmanna"),
    ("Debess"),
    ("Decembris"),
    ("Deguns"),
    ("Degvins"),
    ("Deklinacija"),
    ("Delna"),
    ("Delta"),
    ("Deminutivs"),
    ("Demiurgs"),
    ("Demonims"),
    ("Detrits"),
    ("Diagonale"),
    ("Dialekts"),
    ("Diaspora"),
    ("Dibens"),
    ("Diena"),
    ("Dienests"),
    ("Dienvidaustrumazija"),
    ("Dienvidkoreja"),
    ("Dienvidsudana"),
    ("Dieveris"),
    ("Dievs"),
    ("Dieviba"),
    ("Difrakcija"),
    ("Dinastija"),
    ("Diognale"),
    ("Dirigents"),
    ("Disaharids"),
    ("Dispersija"),
    ("Distance"),
    ("Divdabis"),
    ("Divi"),
    ("Divritenis"),
    ("Divskaitlis"),
    ("Diezs"),
    ("Dizpardoklis"),
    ("Dizskabardis"),
    ("Domstarpiba"),
    ("Dona"),
    ("Draudziba"),
    ("Draugs"),
    ("Dreifs"),
    ("Drifts"),
    ("Drumlins"),
    ("Drezdene"),
    ("Dumjiba"),
    ("Duris"),
    ("Durklis"),
    ("Durvis"),
    ("Dvasa"),
    ("Dvesele"),
    ("Dzeguze"),
    ("Dzeinis"),
    ("Dzelonis"),
    ("Dzelzs"),
    ("Dzenis"),
    ("Dzeroklis"),
    ("Dziesma"),
    ("Dzimta"),
    ("Dzimte"),
    ("Dzimums"),
    ("Dzintars"),
    ("Dzirde"),
    ("Dzirkles"),
    ("Dzirnavas"),
    ("Dzerve"),
    ("Dzervene"),
    ("Dzive"),
    ("Dzivesveids"),
    ("Dzivnieks"),
    ("Danija"),
    ("Darzenis"),
    ("Davana"),
    ("Dele"),
    ("Delis"),
    ("Dels"),
    ("Digsts"),
    ("Dūmi"),
    ("Dūnas"),
    ("Dzibutija"),
    ("Dzins"),
    ("Egle"),
    ("Ego"),
    ("Eifemisms"),
    ("Eira"),
    ("Eiropa"),
    ("Eirazija"),
    ("Ekologija"),
    ("Ekonomika"),
    ("Eksegeze"),
    ("Ektoparazits"),
    ("Ekvadora"),
    ("Ekvinokcija"),
    ("Elektrons"),
    ("Elements"),
    ("Elfs"),
    ("Elipse"),
    ("Elkonis"),
    ("Emisija"),
    ("Emuars"),
    ("Epigrafika"),
    ("Epitets"),
    ("Ercens"),
    ("Erfurte"),
    ("Ergativs"),
    ("Eritreja"),
    ("Esamiba"),
    ("Esene"),
    ("Esperanto"),
    ("Estere"),
    ("Esteris"),
    ("Etalons"),
    ("Etanols"),
    ("Etilspirts"),
    ("Etimologija"),
    ("Etiopija"),
    ("Etikis");
INSERT INTO adjactives(name)
VALUES ("agrs"),
    ("Akls"),
    ("Aktuals"),
    ("Amizants"),
    ("Amorfs"),
    ("Angļu"),
    ("Ass"),
    ("Atjautigs"),
    ("Augsts"),
    ("Ausigs"),
    ("Baismigs"),
    ("Baltas"),
    ("Biezs"),
    ("Bikls"),
    ("Bistams"),
    ("Caurs"),
    ("Ciets"),
    ("Daudzvalodigs"),
    ("Dross"),
    ("Dregns"),
    ("Dzeltens"),
    ("Dzestrs"),
    ("Galvenais"),
    ("Gars"),
    ("Gudrs"),
    ("Homofobisks"),
    ("Homoseksuals"),
    ("Imaginars"),
    ("Intransitivs"),
    ("Irdens"),
    ("Jauns"),
    ("Kails"),
    ("Karsts"),
    ("Kolektivs"),
    ("Konkuretspejigs"),
    ("Kvalitativs"),
    ("Labs"),
    ("Labveligs"),
    ("Lakonisks"),
    ("Liels"),
    ("Lokans"),
    ("Vikivardnica:Latviesu valodas ipasibas varda sagatave"),
    ("Mazs"),
    ("Magisks"),
    ("Melns"),
    ("Moderns"),
    ("Molars"),
    ("Mono"),
    ("Miksts"),
    ("Nederigs"),
    ("Nedziļs"),
    ("Nekulturals"),
    ("Netirs"),
    ("Oranzs"),
    ("Peleks"),
    ("Perfekts"),
    ("Perpendikulars"),
    ("Pikts"),
    ("Pilns"),
    ("Plats"),
    ("Pliks"),
    ("Plans"),
    ("Pukains"),
    ("Radioaktivs"),
    ("Raibs"),
    ("Rets"),
    ("Rituals"),
    ("Rams"),
    ("Rita"),
    ("Rūgts"),
    ("Salds"),
    ("Salts"),
    ("Sauss"),
    ("Sekls"),
    ("Sens"),
    ("Silts"),
    ("Skaists"),
    ("Skrajs"),
    ("Skabs"),
    ("Slapjs"),
    ("Slikts"),
    ("Smags"),
    ("Staigns"),
    ("Stiprs"),
    ("Sveiks"),
    ("Svets"),
    ("Siks"),
    ("Transitivs"),
    ("Tukss"),
    ("Tumss"),
    ("Tirs"),
    ("Vegetars"),
    ("Violets"),
    ("Vels"),
    ("Vess"),
    ("Zaļs"),
    ("Zils"),
    ("atrs"),
    ("igns"),
    ("iss"),
    ("Ļauns"),
    ("saurs");
